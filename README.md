# WordFlow - Платформа для Блогов на Django

WordFlow - это современная, многофункциональная платформа для блогов, построенная на Django. Она предоставляет чистый, интуитивно понятный интерфейс для создания, управления и публикации блог-постов с расширенными возможностями, такими как редактор форматированного текста, управление пользователями и интерактивная система комментариев.

## Возможности

### Основной функционал
- **Аутентификация пользователей**: Полная система регистрации, входа и управления профилями
- **Редактор форматированного текста**: Интегрированный CKEditor 5 с поддержкой русского языка
- **Управление постами**: Создание, редактирование, удаление и организация блог-постов
- **Система категорий**: Организация постов по категориям с возможностью фильтрации
- **Система комментариев**: Интерактивные комментарии с правильной атрибуцией пользователей
- **Отслеживание просмотров**: Отслеживание просмотров постов с аналитикой на основе сессий
- **Система лайков**: Пользователи могут ставить/убирать лайки с обновлением в реальном времени

### Пользовательский опыт
- **Адаптивный дизайн**: Мобильно-дружественный интерфейс на Bootstrap
- **Русская локализация**: Полная поддержка русского языка (ru-RU)
- **Опции сортировки**: Сортировка постов по дате, лайкам, просмотрам или комментариям
- **Пагинация**: Эффективная пагинация для больших коллекций постов
- **Управление профилем**: Профили пользователей с историей постов и статистикой

### Расширенные возможности
- **Система разрешений**: Ролевой контроль доступа для создания постов
- **Управление редакторами**: Совместное редактирование с назначением редакторов
- **Обработка медиа**: Загрузка изображений и управление медиафайлами
- **SEO-дружественность**: Чистые URL и правильные мета-теги
- **Админ-интерфейс**: Интеграция с Django admin для управления контентом

## Технологический стек

- **Backend**: Django 4.2.5
- **База данных**: SQLite (разработка) / PostgreSQL (готов для продакшена)
- **Frontend**: Bootstrap 5, jQuery, CKEditor 5
- **Языки**: Python 3.11+, HTML5, CSS3, JavaScript
- **Развертывание**: Включена поддержка Docker

## Быстрый старт

### Требования
- Python 3.11 или выше
- pip (менеджер пакетов Python)
- Git

### Установка

1. **Клонируйте репозиторий**
   ```bash
   git clone https://github.com/whitneyluv/wordflow
   cd wordflow
   ```

2. **Создайте виртуальное окружение**
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # На Windows: .venv\Scripts\activate
   ```

3. **Установите зависимости**
   ```bash
   pip install -r requirements.txt
   ```

4. **Настройте переменные окружения**
   ```bash
   cp .env.example .env
   # Отредактируйте файл .env с вашими настройками
   ```

5. **Запустите автоматическую настройку**
   ```bash
   python setup.py
   ```
   
   Или вручную:
   ```bash
   python manage.py migrate
   python manage.py createsuperuser
   python manage.py collectstatic
   ```

6. **Запустите сервер разработки**
   ```bash
   python manage.py runserver
   ```

7. **Откройте приложение**
   - Основной сайт: http://127.0.0.1:8000
   - Админ-панель: http://127.0.0.1:8000/admin

## Конфигурация

### Переменные окружения
Создайте файл `.env` в корне проекта (скопируйте из `.env.example`):

```env
SECRET_KEY=ваш-секретный-ключ-здесь
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# База данных (для продакшена)
DATABASE_URL=postgresql://user:password@localhost:5432/wordflow_db

# Email (опционально)
EMAIL_HOST=smtp.gmail.com
EMAIL_HOST_USER=ваш-email@gmail.com
EMAIL_HOST_PASSWORD=ваш-пароль-приложения
```

### Настройки продакшена
Используйте `production_settings.py` для развертывания в продакшене с улучшенными настройками безопасности.

## Использование

### Создание постов
1. Зарегистрируйте аккаунт или войдите в систему
2. Только суперпользователи и назначенные редакторы могут создавать посты
3. Используйте редактор форматированного текста для оформления контента
4. Назначьте категории и опубликуйте

### Управление пользователями
- **Суперпользователи**: Полный доступ ко всем функциям через Django admin
- **Редакторы**: Могут создавать и управлять постами (назначаются через админку)
- **Обычные пользователи**: Могут просматривать посты, комментировать и управлять своими профилями

### Система разрешений
- Создание постов ограничено только авторизованными пользователями
- Используйте Django admin для предоставления прав редактора
- Прямой доступ по URL защищен с правильной обработкой ошибок

## Разработка

### Зависимости для разработки
```bash
pip install -r requirements-dev.txt
```

### Запуск тестов
```bash
pytest
```

### Инструменты качества кода
```bash
# Форматирование кода
black .
isort .

# Проверка качества кода
flake8 .
```

### Разработка с Docker
```bash
# Запуск с Docker Compose
docker-compose up --build

# Или сборка вручную
docker build -t wordflow .
docker run -p 8000:8000 wordflow
```

## Развертывание

### Чек-лист для продакшена
- [ ] Установить `DEBUG=False`
- [ ] Настроить базу данных PostgreSQL
- [ ] Установить правильный `SECRET_KEY`
- [ ] Настроить обслуживание статических файлов
- [ ] Настроить email backend
- [ ] Настроить разрешенные хосты
- [ ] Включить настройки SSL/HTTPS

### Docker продакшен
```bash
# Сборка продакшен образа
docker build -t wordflow:production .

# Запуск с настройками продакшена
docker run -p 8000:8000 -e DJANGO_SETTINGS_MODULE=myproject.production_settings wordflow:production
```

### Настройка окружения
1. Скопируйте `.env.example` в `.env`
2. Обновите все переменные окружения
3. Запустите миграции: `python manage.py migrate`
4. Соберите статические файлы: `python manage.py collectstatic`
5. Создайте суперпользователя: `python manage.py createsuperuser`

## Структура проекта

```
wordflow/
├── myproject/              # Настройки Django проекта
│   ├── settings.py         # Основные настройки
│   ├── production_settings.py  # Конфигурация продакшена
│   └── urls.py            # URL маршрутизация
├── wordflow/              # Основное приложение
│   ├── models.py          # Модели базы данных
│   ├── views.py           # Логика представлений
│   ├── urls.py            # URL приложения
│   └── templatetags/      # Пользовательские теги шаблонов
├── templates/             # HTML шаблоны
├── static/               # Статические файлы (CSS, JS, изображения)
├── media/                # Загрузки пользователей (в gitignore)
├── requirements.txt      # Зависимости продакшена
├── requirements-dev.txt  # Зависимости разработки
├── .env.example         # Шаблон переменных окружения
├── .gitignore           # Правила Git ignore
├── Dockerfile           # Конфигурация Docker
├── docker-compose.yml   # Настройка Docker Compose
└── setup.py            # Скрипт автоматической настройки
```

## Функции безопасности

- Конфигурация на основе переменных окружения
- Включена CSRF защита
- XSS защита
- Безопасная обработка сессий
- Заголовки безопасности продакшена
- Оптимизация запросов к базе данных
- Валидация и санитизация входных данных

## Поддержка и устранение неполадок

### Частые проблемы
- **Отказано в доступе для создания поста**: Убедитесь, что у пользователя есть права редактора через Django admin
- **Статические файлы не загружаются**: Запустите `python manage.py collectstatic`
- **Ошибки базы данных**: Проверьте конфигурацию базы данных и запустите миграции
- **CKEditor не работает**: Убедитесь, что статические файлы правильно обслуживаются